#### add time-limited price lists with product special prices ([#3628](https://github.com/shopsys/shopsys/pull/3628))

- [features moved](#movement-of-features-from-project-base-to-packages) from project-base to the framework package:
    - `disabled` parameter in twig macro `productsWidgetItem` used in product picker
- update Elasticsearch and Kibana to version 7.16.1 on all your environments
    - you can use docker images `docker.elastic.co/elasticsearch/elasticsearch:7.16.1` and `docker.elastic.co/kibana/kibana:7.16.1`
    - the minimum required version is 7.11, otherwise you cannot use the runtime fields to filter, search and get proper aggregations by price
- `Shopsys\FrameworkBundle\Controller\Admin\ProductPickerController::pickMultipleAction()` now have to accept optional `withPrice` argument and render the proper js class in the `@ShopsysFramework/Admin/Content/ProductPicker/listGrid.html.twig` template
- `Shopsys\FrameworkBundle\Model\Product\Pricing\ProductPriceCalculationForCustomerUser`
    - methods `calculatePriceForCurrentUser()` and `calculatePriceForPricingGroup()` now respects the special price set in the price list
    - if you need the basic price without the special price applied, for example to render the original price on storefront, use `calculateBasicPriceForCurrentUser()` method
    - check the usage of the methods if it matches your needs
- check your custom implementation of `Shopsys\FrameworkBundle\Model\Product\Search\FilterQuery` and adjust the custom logic regarding the new runtime fields `max_current_selling_price_with_vat` and `min_current_selling_price_with_vat`
    - those fields are used for sorting, filtering and price min/max aggregations
- GraphQL field `price` on `Product` is now required
- GraphQL field `ProductPrice` was enriched with fields `nextPriceChange`, `percentageDiscount`, and `basicPrice`
    - see GraphQL documentation in introspection to learn the purpose of those fields
- `Shopsys\FrontendApiBundle\Model\Resolver\Price\PriceQuery::priceByProductQuery()` was removed, use the `Shopsys\FrontendApiBundle\Model\Resolver\Price\ProductPriceQuery::priceByProductQuery()` instead
    - this new query respects the special price set and returns the `PriceInfo` object that represents the improved `ProductPrice` GraphQL field
- see #project-base-diff to update your project
